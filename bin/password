#!/usr/bin/env bash

function exists()
{
  command -v "$1" >/dev/null 2>&1
}

function pathadd() {
  if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
      PATH="${PATH:+"$PATH:"}$1"
  fi
}

if exists ruby; then
  echo 'ruby exists!' >/dev/null 2>&1
else
  echo 'Your system does not have rbenv installed'
  exit 1
fi

if exists rbenv; then
  echo 'rbenv exists!' >/dev/null 2>&1
else
  echo 'Your system does not have rbenv installed'
fi

if exists rbenv; then
  export RBENV_VERSION=2.7.1
fi

ruby ./bin/password.rb $@

if test -f "generated_password.html"; then
  open "generated_password.html"
  sleep 1
  rm -v "generated_password.html"
fi

if exists rbenv; then
  export RBENV_VERSION=
fi
